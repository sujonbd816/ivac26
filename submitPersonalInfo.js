(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88653,59459,e=>{"use strict";e.i(47167);var t=e.i(43476),l=e.i(71645),s=e.i(31178),a=e.i(47414),n=e.i(74008),i=e.i(21476),o=e.i(72846),r=l,u=e.i(37806);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class m extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,l=(0,o.isHTMLElement)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=l-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f({children:e,isPresent:s,anchorX:a,root:n}){let i=(0,r.useId)(),o=(0,r.useRef)(null),f=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=(0,r.useContext)(u.MotionConfigContext),d=function(...e){return l.useCallback(function(...e){return t=>{let l=!1,s=e.map(e=>{let s=c(e,t);return l||"function"!=typeof s||(l=!0),s});if(l)return()=>{for(let t=0;t<s.length;t++){let l=s[t];"function"==typeof l?l():c(e[t],null)}}}}(...e),e)}(o,e.props?.ref??e?.ref);return(0,r.useInsertionEffect)(()=>{let{width:e,height:t,top:l,left:r,right:u}=f.current;if(s||!o.current||!e||!t)return;let c="left"===a?`left: ${r}`:`right: ${u}`;o.current.dataset.motionPopId=i;let m=document.createElement("style");p&&(m.nonce=p);let d=n??document.head;return d.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${c}px !important;
            top: ${l}px !important;
          }
        `),()=>{d.contains(m)&&d.removeChild(m)}},[s]),(0,t.jsx)(m,{isPresent:s,childRef:o,sizeRef:f,children:r.cloneElement(e,{ref:d})})}let p=({children:e,initial:s,isPresent:n,onExitComplete:o,custom:r,presenceAffectsLayout:u,mode:c,anchorX:m,root:p})=>{let x=(0,a.useConstant)(d),h=(0,l.useId)(),b=!0,g=(0,l.useMemo)(()=>(b=!1,{id:h,initial:s,isPresent:n,custom:r,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;o&&o()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[n,x,o]);return u&&b&&(g={...g}),(0,l.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[n]),l.useEffect(()=>{n||x.size||!o||o()},[n]),"popLayout"===c&&(e=(0,t.jsx)(f,{isPresent:n,anchorX:m,root:p,children:e})),(0,t.jsx)(i.PresenceContext.Provider,{value:g,children:e})};function d(){return new Map}var x=e.i(64978);let h=e=>e.key||"";function b(e){let t=[];return l.Children.forEach(e,e=>{(0,l.isValidElement)(e)&&t.push(e)}),t}let g=({children:e,custom:i,initial:o=!0,onExitComplete:r,presenceAffectsLayout:u=!0,mode:c="sync",propagate:m=!1,anchorX:f="left",root:d})=>{let[g,y]=(0,x.usePresence)(m),w=(0,l.useMemo)(()=>b(e),[e]),v=m&&!g?[]:w.map(h),j=(0,l.useRef)(!0),N=(0,l.useRef)(w),C=(0,a.useConstant)(()=>new Map),k=(0,l.useRef)(new Set),[P,S]=(0,l.useState)(w),[_,F]=(0,l.useState)(w);(0,n.useIsomorphicLayoutEffect)(()=>{j.current=!1,N.current=w;for(let e=0;e<_.length;e++){let t=h(_[e]);v.includes(t)?(C.delete(t),k.current.delete(t)):!0!==C.get(t)&&C.set(t,!1)}},[_,v.length,v.join("-")]);let $=[];if(w!==P){let e=[...w];for(let t=0;t<_.length;t++){let l=_[t],s=h(l);v.includes(s)||(e.splice(t,0,l),$.push(l))}return"wait"===c&&$.length&&(e=$),F(b(e)),S(w),null}let{forceRender:I}=(0,l.useContext)(s.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:_.map(e=>{let l=h(e),s=(!m||!!g)&&(w===_||v.includes(l));return(0,t.jsx)(p,{isPresent:s,initial:(!j.current||!!o)&&void 0,custom:i,presenceAffectsLayout:u,mode:c,root:d,onExitComplete:s?void 0:()=>{if(k.current.has(l)||(k.current.add(l),!C.has(l)))return;C.set(l,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(I?.(),F(N.current),m&&y?.(),r&&r())},anchorX:f,children:e},l)})})};e.s(["AnimatePresence",()=>g],88653),e.s(["isHTML",0,e=>/<\/?[a-z][\s\S]*>/i.test(e)],59459)},32252,e=>{"use strict";var t=e.i(43476),l=e.i(71645),s=e.i(88653),a=e.i(46932),n=e.i(63762),i=e.i(59459);e.s(["default",0,({message:e,type:o="info",onClose:r})=>{let[u,c]=(0,l.useState)(!0);if(!u)return null;let m=(0,i.isHTML)(e)?"Too many attempts. Please try again later.":e;return(0,t.jsx)(s.AnimatePresence,{children:u&&(0,t.jsx)(a.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:150,damping:25},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:`flex justify-center flex-col min-h-[300px] rounded-xl shadow-2xl p-6 max-w-md w-full mx-4 text-center ${{success:"bg-green-500 text-white",error:"bg-red-500 text-white",info:"bg-blue-500 text-white",warning:"bg-yellow-400 text-black"}[o]}`,children:[(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center mb-4",children:[(0,t.jsx)(n.CloseIcon,{})," ",(0,t.jsx)("p",{className:"text-white font-bold text-2xl py-4",children:"Error!"})]}),(0,t.jsx)("span",{className:"block mb-4 break-words",children:m}),(0,t.jsx)("button",{onClick:()=>{c(!1),"Session expired. Please log in again."===e&&(localStorage.clear(),window.location.href="/"),"Validation Failed"===e&&window.location.reload(),r&&r()},className:"mt-2 w-24 py-2 rounded bg-gray-500 text-white hover:bg-gray-600 mx-auto",children:"OK"})]})})})}],32252)},38274,e=>{"use strict";var t=e.i(43476),l=e.i(46932),s=e.i(48148),a=e.i(18566),n=e.i(71645),i=e.i(55487),o=e.i(95187);let r=(0,o.createServerReference)("605942a41f2f192697027bd16b7527877c549050cc",o.callServer,void 0,o.findSourceMapURL,"submitPersonalInfo");var u=e.i(29026),c=e.i(58152),m=e.i(42222),f=e.i(46577),p=e.i(97476),d=e.i(76275),x=e.i(7910),h=e.i(32252);e.s(["default",0,()=>{let[e,o]=(0,n.useState)(!1),b=(0,s.useTranslations)("root"),g=((0,a.useRouter)(),(0,i.useDispatch)()),{user:y}=(0,i.useSelector)(e=>e.authUser),w=(0,i.useSelector)(e=>e.application.isEdit),{applicationData:v}=(0,i.useSelector)(e=>e.application),{personalInfo:j}=(0,i.useSelector)(e=>e.personalInfo),[N,C]=(0,n.useState)(null),[k,P]=(0,n.useState)(!1),[S,_]=(0,n.useState)(""),[F,$]=(0,n.useState)(""),[I,D]=(0,n.useState)(""),[E,R]=(0,n.useState)(""),[T,A]=(0,n.useState)(0),[M,L]=(0,n.useState)({});(0,n.useEffect)(()=>{y&&(_(y.name),$(y.email),D(y.user_phone)),j&&L(j.family),v&&(R(v.webfile_id),A(parseInt(v.family_count,10)||0))},[y,v,j]);let q=(e,t,l)=>{let s={...M,[e+1]:{...M[e+1],[t]:l}};L(s),g((0,x.setPersonalInfo)({family:s}))},W=async()=>{let{valid:e,errors:t}=(()=>{let e=[];if(S.trim()||e.push("Full name is required."),F.trim()||e.push("Email is required."),I.trim()||e.push("Phone is required."),E.trim()||e.push("Web file number is required."),T>0)for(let t=1;t<=T;t++){let l=M[t];l?.name?.trim()||e.push(`Family member ${t}: Name is required.`),l?.webfile_no?.trim()||e.push(`Family member ${t}: Web file number is required.`),l?.again_webfile_no?.trim()||e.push(`Family member ${t}: Confirm web file number is required.`)}return e.length>0?{valid:!1,errors:e}:{valid:!0}})();if(!e&&t&&t.length>0)return void C({message:"Please fix the following error:\n"+t[0],type:"error"});try{P(!0);let e={full_name:S,email_name:F,phone:I,webfile_id:E,family:M},t=await r(e,w);if(t?.status_code===200)g((0,x.setPersonalInfo)(e)),g((0,f.setApplicationStep)(3)),C({message:"Amount change notified successfully",type:"success"});else{let e,l;e=t.message||"Failed to notify",l=t.status_code||422,401===l||419===l?(C({message:e,type:"error"}),setTimeout(async()=>{(0,c.handleLogout)(),await (0,u.logoutAction)(),g((0,p.clearAll)()),await m.persistor.purge(),g((0,d.setStep)(1))},2e3)):C({message:e,type:"error"})}}catch{C({message:"An unexpected error occurred. Please try again later.",type:"error"})}finally{P(!1)}};return(0,n.useEffect)(()=>{if(w)return void o(!0);o(!1);let e=setTimeout(()=>{o(!0)},1e4+35e3*T);return()=>clearTimeout(e)},[T,w]),(0,t.jsxs)("div",{className:"grid gap-x-6 gap-y-2",children:[N&&(0,t.jsx)(h.default,{message:N.message,type:N.type,onClose:()=>C(null)}),(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)("label",{htmlFor:"full-name",className:"block text-xs font-light text-black uppercase",children:b("lblInputName")}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{type:"text",name:"full-name",id:"full-name",value:S,disabled:!0,autoComplete:"off",placeholder:b("lblInputRegName"),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-black outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-xs font-light text-black uppercase",children:b("lblInputEmail")}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{type:"text",name:"email",id:"email",onCopy:e=>e.preventDefault(),onPaste:e=>e.preventDefault(),onCut:e=>e.preventDefault(),value:F,disabled:!0,autoComplete:"off",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-black outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)("label",{htmlFor:"user_phone",className:"block text-xs font-light text-black uppercase",children:b("lblInputContactNo")}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{type:"text",name:"user_phone",id:"user_phone",onCopy:e=>e.preventDefault(),onPaste:e=>e.preventDefault(),onCut:e=>e.preventDefault(),value:I,disabled:!0,autoComplete:"off",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-black outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsx)("label",{htmlFor:"webfile_id",className:"block text-xs font-light text-black uppercase",children:b("ovWebID")}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{type:"text",name:"webfile_id",id:"webfile_id",value:E,disabled:!0,autoComplete:"off",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-black outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-3",children:[[...Array(T)].map((e,l)=>(0,t.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("label",{htmlFor:`full-name-${l}`,className:"block text-xs font-light text-black uppercase my-2",children:[b("lblInputFamily")," ",l+1]}),(0,t.jsxs)("label",{htmlFor:`full-name-${l}`,className:"block text-xs font-light text-black uppercase",children:[b("lblInputFullName")," ",(0,t.jsxs)("span",{className:"text-red-600 text-[10px]",children:["*(",b("lblRequired"),")"]})]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{type:"text",name:`full-name-${l}`,id:`full-name-${l}`,onCopy:e=>e.preventDefault(),onPaste:e=>e.preventDefault(),onCut:e=>e.preventDefault(),value:M[l+1]?.name||"",onChange:e=>q(l,"name",e.target.value),autoComplete:"off",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-black outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 sm:text-sm/6"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsxs)("label",{htmlFor:`web-file-number-${l}`,className:"block text-xs font-light text-black uppercase",children:[b("lblInputFamilyWebFile")," ",(0,t.jsxs)("span",{className:"text-red-600 text-[10px]",children:["*(",b("lblMustFace7"),")"]})]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{type:"text",name:`web-file-number-${l}`,id:`web-file-number-${l}`,onCopy:e=>e.preventDefault(),onPaste:e=>e.preventDefault(),onCut:e=>e.preventDefault(),value:M[l+1]?.webfile_no||"",onChange:e=>q(l,"webfile_no",e.target.value),autoComplete:"off",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-black outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 sm:text-sm/6"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-3",children:[(0,t.jsxs)("label",{htmlFor:`web-file-number-repeat-${l}`,className:"block text-xs font-light text-black uppercase",children:[b("lblInputFamilyWebFileAgain")," ",(0,t.jsxs)("span",{className:"text-red-600 text-[10px]",children:["*(",b("lblNoCopyPaste"),")"]})]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{type:"text",name:`web-file-number-repeat-${l}`,id:`web-file-number-repeat-${l}`,onCopy:e=>e.preventDefault(),onPaste:e=>e.preventDefault(),onCut:e=>e.preventDefault(),value:M[l+1]?.again_webfile_no||"",onChange:e=>q(l,"again_webfile_no",e.target.value),autoComplete:"off",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-black outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 sm:text-sm/6"})})]})]},l)),(0,t.jsx)("div",{className:"sm:col-span-3",children:k?(0,t.jsxs)(l.motion.button,{type:"button",whileTap:{scale:.95},className:"text-white mb-2 duration-300 cursor-not-allowed mt-2 h-8 rounded-lg text-xs w-full sm:w-auto px-2 py-2 text-center transition bg-gray-500 ",children:[b("checking"),"..."]}):(0,t.jsx)(l.motion.button,{type:"button",whileTap:{scale:.95},className:`text-white mb-2 duration-300 mt-2 h-8 rounded-lg text-xs w-full sm:w-auto px-2 py-2 text-center transition bg-[#28a745] hover:bg-[#218838] ${e?"cursor-pointer":"cursor-not-allowed opacity-50"}`,onClick:e?W:void 0,disabled:!e,children:b("lblSaveNext")})})]})]})}],38274)},73563,e=>{e.n(e.i(38274))}]);